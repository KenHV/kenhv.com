#!/bin/bash

files=$(find public/ -type f -name "*.html")

if [[ -z "$files" ]]; then
  exit 0
fi

for file in $files; do
  html-minifier-terser \
    --collapse-boolean-attributes \
    --collapse-whitespace \
    --conservative-collapse \
    --decode-entities \
    --keep-closing-slash \
    --minify-css \
    --minify-js \
    --preserve-line-breaks \
    --remove-comments \
    --remove-empty-attributes \
    --remove-redundant-attributes \
    --remove-script-type-attributes \
    --remove-style-link-type-attributes \
    --trim-custom-fragments \
    --use-short-doctype \
    -o $file $file
done

git add $files
